!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";var a=Object.prototype.hasOwnProperty,r="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)a.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=r?r+t:t,a=this._events[n];if(e)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var i=0,s=a.length,o=new Array(s);i<s;i++)o[i]=a[i].fn;return o},o.prototype.emit=function(t,e,n,a,i,s){var o=r?r+t:t;if(!this._events[o])return!1;var u,c,l=this._events[o],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,a),!0;case 5:return l.fn.call(l.context,e,n,a,i),!0;case 6:return l.fn.call(l.context,e,n,a,i,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,v=l.length;for(c=0;c<v;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,a);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var a=new s(e,n||this),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},o.prototype.once=function(t,e,n){var a=new s(e,n||this,!0),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,a){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new i:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==e||a&&!o.once||n&&o.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[s]);else{for(var u=0,c=[],l=o.length;u<l;u++)(o[u].fn!==e||a&&!o[u].once||n&&o[u].context!==n)&&c.push(o[u]);c.length?this._events[s]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new i:delete this._events[s]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=r,o.EventEmitter=o,t.exports=o},function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(0),i=function(){},s={data:"state-data",cdata:"state-cdata",tagBegin:"state-tag-begin",tagName:"state-tag-name",tagEnd:"state-tag-end",attributeNameStart:"state-attribute-name-start",attributeName:"state-attribute-name",attributeNameEnd:"state-attribute-name-end",attributeValueBegin:"state-attribute-value-begin",attributeValue:"state-attribute-value"},o={lt:"action-lt",gt:"action-gt",space:"action-space",equal:"action-equal",quote:"action-quote",slash:"action-slash",char:"action-char",error:"action-error"},u={text:"text",openTag:"open-tag",closeTag:"close-tag",attributeName:"attribute-name",attributeValue:"attribute-value"},c={" ":o.space,"\t":o.space,"\n":o.space,"\r":o.space,"<":o.lt,">":o.gt,'"':o.quote,"'":o.quote,"=":o.equal,"/":o.slash};t.exports={State:s,Action:o,Type:u,create:function(t){var e,n,l,f,h,v,p,d,b,g;t=Object.assign({debug:!1},t);var _=new r,m=s.data,y="",x="",w="",N="",O="",C="",j=function(e,n){if("?"!==x[0]&&"!"!==x[0]){var a={type:e,value:n};t.debug&&console.log("emit:",a),_.emit("data",a)}};_.stateMachine=(a(g={},s.data,(a(e={},o.lt,function(){y.trim()&&j(u.text,y),x="",O=!1,m=s.tagBegin}),a(e,o.char,function(t){y+=t}),e)),a(g,s.cdata,a({},o.char,function(t){"]]>"===(y+=t).substr(-3)&&(j(u.text,y.slice(0,-3)),y="",m=s.data)})),a(g,s.tagBegin,(a(n={},o.space,i),a(n,o.char,function(t){x=t,m=s.tagName}),a(n,o.slash,function(){x="",O=!0}),n)),a(g,s.tagName,(a(l={},o.space,function(){O?m=s.tagEnd:(m=s.attributeNameStart,j(u.openTag,x))}),a(l,o.gt,function(){j(O?u.closeTag:u.openTag,x),y="",m=s.data}),a(l,o.slash,function(){m=s.tagEnd,j(u.openTag,x)}),a(l,o.char,function(t){"![CDATA["===(x+=t)&&(m=s.cdata,y="",x="")}),l)),a(g,s.tagEnd,(a(f={},o.gt,function(){j(u.closeTag,x),y="",m=s.data}),a(f,o.char,i),f)),a(g,s.attributeNameStart,(a(h={},o.char,function(t){w=t,m=s.attributeName}),a(h,o.gt,function(){y="",m=s.data}),a(h,o.space,i),a(h,o.slash,function(){O=!0,m=s.tagEnd}),h)),a(g,s.attributeName,(a(v={},o.space,function(){m=s.attributeNameEnd}),a(v,o.equal,function(){j(u.attributeName,w),m=s.attributeValueBegin}),a(v,o.gt,function(){N="",j(u.attributeName,w),j(u.attributeValue,N),y="",m=s.data}),a(v,o.slash,function(){O=!0,N="",j(u.attributeName,w),j(u.attributeValue,N),m=s.tagEnd}),a(v,o.char,function(t){w+=t}),v)),a(g,s.attributeNameEnd,(a(p={},o.space,i),a(p,o.equal,function(){j(u.attributeName,w),m=s.attributeValueBegin}),a(p,o.gt,function(){N="",j(u.attributeName,w),j(u.attributeValue,N),y="",m=s.data}),a(p,o.char,function(t){N="",j(u.attributeName,w),j(u.attributeValue,N),w=t,m=s.attributeName}),p)),a(g,s.attributeValueBegin,(a(d={},o.space,i),a(d,o.quote,function(t){C=t,N="",m=s.attributeValue}),a(d,o.gt,function(){j(u.attributeValue,N=""),y="",m=s.data}),a(d,o.char,function(t){C="",N=t,m=s.attributeValue}),d)),a(g,s.attributeValue,(a(b={},o.space,function(t){C?N+=t:(j(u.attributeValue,N),m=s.attributeNameStart)}),a(b,o.quote,function(t){C===t?(j(u.attributeValue,N),m=s.attributeNameStart):N+=t}),a(b,o.gt,function(t){C?N+=t:(j(u.attributeValue,N),y="",m=s.data)}),a(b,o.slash,function(t){C?N+=t:(j(u.attributeValue,N),O=!0,m=s.tagEnd)}),a(b,o.char,function(t){N+=t}),b)),g);var L=function(e){t.debug&&console.log(m,e);var n=_.stateMachine[m];(n[function(t){return c[t]||o.char}(e)]||n[o.error]||n[o.char])(e)};return _.write=function(t){for(var e=t.length,n=0;n<e;n++)L(t[n])},_}}},function(t,e,n){"use strict";var a=Object.prototype.hasOwnProperty,r="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)a.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=r?r+t:t,a=this._events[n];if(e)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var i=0,s=a.length,o=new Array(s);i<s;i++)o[i]=a[i].fn;return o},o.prototype.emit=function(t,e,n,a,i,s){var o=r?r+t:t;if(!this._events[o])return!1;var u,c,l=this._events[o],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,a),!0;case 5:return l.fn.call(l.context,e,n,a,i),!0;case 6:return l.fn.call(l.context,e,n,a,i,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,v=l.length;for(c=0;c<v;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,a);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var a=new s(e,n||this),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},o.prototype.once=function(t,e,n){var a=new s(e,n||this,!0),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,a){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new i:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==e||a&&!o.once||n&&o.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[s]);else{for(var u=0,c=[],l=o.length;u<l;u++)(o[u].fn!==e||a&&!o[u].once||n&&o[u].context!==n)&&c.push(o[u]);c.length?this._events[s]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new i:delete this._events[s]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=r,o.EventEmitter=o,t.exports=o},function(t,e,n){"use strict";var a=n(2),r=n(1),i=r.Type,s={element:"element",text:"text"},o=function(t){return Object.assign({name:"",type:s.element,value:"",parent:null,attributes:{},children:[]},t)},u=function(t){t=Object.assign({stream:!1,parentNodes:!0,doneEvent:"done",tagPrefix:"tag:",emitTopLevelOnly:!1,debug:!1},t);var e=void 0,n=void 0,u=void 0,c=void 0,l=new a,f=function(a){switch(a.type){case i.openTag:if(null===u)(u=n).name=a.value;else{var r=o({name:a.value,parent:u});u.children.push(r),u=r}break;case i.closeTag:var f=u.parent;if(t.parentNodes||(u.parent=null),u.name!==a.value)break;t.stream&&f===n&&(n.children=[],u.parent=null),t.emitTopLevelOnly&&f!==n||(l.emit(t.tagPrefix+u.name,u),l.emit("tag",u.name,u)),u===n&&(e.removeAllListeners("data"),l.emit(t.doneEvent,u),n=null),u=f;break;case i.text:u&&u.children.push(o({type:s.text,value:a.value,parent:t.parentNodes?u:null}));break;case i.attributeName:c=a.value,u.attributes[c]="";break;case i.attributeValue:u.attributes[c]=a.value}};return l.reset=function(){(e=r.create({debug:t.debug})).on("data",f),n=o(),u=null,c="",l.parse=e.write},l.reset(),l};t.exports={parseSync:function(t,e){e=Object.assign({},e,{stream:!1,tagPrefix:":"});var n=u(e),a=void 0;return n.on("done",function(t){a=t}),n.parse(t),a},create:u,NodeType:s}},function(t,e,n){const a=n(3),r=_.template('<xliff xmlns="urn:oasis:names:tc:xliff:document:1.2" version="1.2" srcLang="en_GB" trgLang="">\n    <file id="<%=data.attributes.id%>">\n        <body>\n        <% data.children.forEach(function(item) { %>\n            <trans-unit id="<%=item.attributes.id%>">\n                <source><%=item.children[0].children[0].children[0].value%></source>\n                <target/>\n            </trans-unit>\n        <% }); %>\n        </body>\n    </file>\n</xliff>');function i(t){for(;"unit"!=t.children[0].name;)t=t.children[0];let e=document.querySelector("#right pre code");e.textContent=r({data:t}),hljs.highlightBlock(e)}document.querySelector("button").addEventListener("click",()=>{let t=document.querySelector("#left pre code"),e='<?xml version="1.0"?>'+t.textContent;hljs.highlightBlock(t);const n=a.create();n.on("done",i),n.parse(e)})}]);